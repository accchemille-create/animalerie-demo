<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ACC Animalerie Chemillé Centre</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h1>ACC Animalerie Chemillé Centre</h1>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="menuBtn" style="display:none;padding:8px 12px;background:#fff;border:0;border-radius:4px;cursor:pointer;font-size:18px">☰</button>
        <button id="loginBtn" style="padding:8px 12px;background:#fff;border:0;border-radius:4px;cursor:pointer">Connexion</button>
      </div>
    </div>
    <nav id="mainNav" style="display:none;background:#fff;border-top:1px solid #e3e6ea;padding:8px 16px">
      <button data-target="account" class="menuLink">Fiche personnelle</button>
      <button data-target="advice" class="menuLink">Conseils</button>
      <button data-target="partners" class="menuLink">Partenaires locaux</button>
      <button data-target="events" class="menuLink">Événements</button>
    </nav>
  </header>

  <main id="mainContent" style="display:none">
    <section id="account" class="panel">
      <h2>Fiche personnelle</h2>
      <div id="profile"></div>

      <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
        <div id="profilePhotoPreview" style="width:96px;height:96px;border-radius:8px;overflow:hidden;background:#f0f0f0;display:flex;align-items:center;justify-content:center">Aucune photo</div>
        <div style="flex:1">
          <label>Photo de profil<br><input type="file" id="profilePhotoInput" accept="image/*"></label>
          <label style="display:block;margin-top:8px">Galerie (plusieurs)<br><input type="file" id="galleryInput" accept="image/*" multiple></label>
        </div>
      </div>

      <button id="toggleAnimalsProfileBtn" style="margin-top:16px;padding:10px 12px;background:#fff;border:1px solid #dfe7e3;color:#2f6b47;border-radius:6px;cursor:pointer">Ajouter / Modifier mes animaux ▾</button>
      <div id="profileAnimalsSection" style="display:none;margin-top:12px">
        <div id="profileAnimalsList" style="max-height:300px;overflow-y:auto;margin-bottom:12px"></div>
        <button type="button" id="addAnimalBtnProfile" style="padding:6px 10px;background:#e8f1f0;border:1px solid #2f6b47;color:#2f6b47;border-radius:4px;cursor:pointer;margin-bottom:12px">+ Ajouter un animal</button>
        <button type="button" id="saveAnimalsBtnProfile" style="padding:8px 16px;background:#2f6b47;color:#fff;border:0;border-radius:4px;cursor:pointer">Enregistrer les modifications</button>
      </div>

      <div id="galleryPreview" style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap"></div>
    </section>

    <section id="advice" class="panel" style="display:none">
      <h2>Fiches conseils & bien-être</h2>
      <div id="adminControls" style="margin-top:8px;margin-bottom:12px">
        <button id="adminLoginBtn" style="padding:6px 10px;background:#fff;border:1px solid #2b7a78;color:#2b7a78;border-radius:4px;cursor:pointer">Connexion administratrice</button>
        <form id="adminLoginForm" style="display:none;display:flex;gap:8px;align-items:center;margin-top:8px">
          <input id="adminPassword" type="password" placeholder="Mot de passe administratrice" style="padding:6px;border-radius:4px;border:1px solid #ddd" />
          <button id="adminLoginSubmit" type="button" style="padding:6px 10px;background:#2f6b47;color:#fff;border:0;border-radius:4px;cursor:pointer">Valider</button>
          <button id="adminLogoutBtn" type="button" style="display:none;padding:6px 10px;background:#ff6666;color:#fff;border:0;border-radius:4px;cursor:pointer">Se déconnecter</button>
        </form>

        <!-- Change password UI (visible only when admin is connected) -->
        <div id="adminChangePwd" style="display:none;margin-top:8px">
          <button id="showChangePwdBtn" style="padding:6px 10px;background:#fff;border:1px solid #2b7a78;color:#2b7a78;border-radius:4px;cursor:pointer">Modifier le mot de passe</button>
          <form id="changePwdForm" style="display:none;margin-top:8px;display:flex;flex-direction:column;gap:8px;max-width:420px">
            <input id="curAdminPwd" type="password" placeholder="Mot de passe actuel" style="padding:6px;border-radius:4px;border:1px solid #ddd" />
            <input id="newAdminPwd" type="password" placeholder="Nouveau mot de passe" style="padding:6px;border-radius:4px;border:1px solid #ddd" />
            <input id="newAdminPwd2" type="password" placeholder="Confirmer nouveau mot de passe" style="padding:6px;border-radius:4px;border:1px solid #ddd" />
            <div style="display:flex;gap:8px">
              <button id="saveNewAdminPwd" type="button" style="padding:6px 10px;background:#2f6b47;color:#fff;border:0;border-radius:4px;cursor:pointer">Enregistrer</button>
              <button id="cancelChangePwd" type="button" style="padding:6px 10px;background:#eee;border:1px solid #ccc;border-radius:4px;cursor:pointer">Annuler</button>
            </div>
          </form>
        </div>
        <!-- Admin management: manage other admin users -->
        <div id="adminMgmt" style="display:none;margin-top:12px">
          <button id="showAdminMgmtBtn" style="padding:6px 10px;background:#fff;border:1px solid #2b7a78;color:#2b7a78;border-radius:4px;cursor:pointer">Gérer les administrateurs</button>
          <div id="adminList" style="display:none;margin-top:8px;max-width:480px"></div>
        </div>
      </div>
      <div class="advice-cats">
        <button data-cat="alimentation">Alimentation</button>
        <button data-cat="soins">Soins</button>
        <button data-cat="prevention">Prévention</button>
        <button data-cat="saisons">Conseils saisonniers</button>
      </div>
      <div id="adviceList"></div>
      <h3>Ajouter une fiche</h3>
      <form id="addAdviceForm">
        <label>Titre<br><input id="adviceTitle" required></label>
        <label>Catégorie<br>
          <select id="adviceCat">
            <option value="alimentation">Alimentation</option>
            <option value="soins">Soins</option>
            <option value="prevention">Prévention</option>
            <option value="saisons">Conseils saisonniers</option>
          </select>
        </label>
        <label>Contenu<br><textarea id="adviceContent" rows="4" required></textarea></label>
        <button type="submit">Ajouter</button>
      </form>
    </section>

    <section id="partners" class="panel" style="display:none">
      <h2>Partenaires locaux</h2>
      <div id="partnersList"></div>
      <h3>Ajouter un partenaire</h3>
      <form id="addPartnerForm">
        <label>Nom<br><input id="partnerName" required></label>
        <label>Type<br>
          <select id="partnerType">
            <option>Association</option>
            <option>Refuge</option>
            <option>Éducateur</option>
            <option>Vétérinaire</option>
            <option>Éleveur responsable</option>
          </select>
        </label>
        <label>Contact / Infos<br><input id="partnerInfo"></label>
        <button type="submit">Ajouter</button>
      </form>
    </section>

    <section id="events" class="panel" style="display:none">
      <h2>Agenda / Événements</h2>
      <div id="eventsList"></div>
      <h3>Ajouter un événement</h3>
      <form id="addEventForm">
        <label>Titre<br><input id="eventTitle" required></label>
        <label>Date<br><input id="eventDate" type="date" required></label>
        <label>Description<br><input id="eventDesc"></label>
        <button type="submit">Ajouter</button>
      </form>
    </section>
  </main>

  <!-- Auth Container -->
  <div id="authContainer">
    <!-- Login Form -->
    <section id="loginForm" class="panel" style="max-width:350px">
      <h2>Connexion</h2>
      <form id="loginSubmit">
        <label>Email<br><input type="email" id="loginEmail" required></label>
        <label>Mot de passe<br><input type="password" id="loginPassword" required></label>
        <button type="submit">Se connecter</button>
      </form>
      <p style="text-align:center;margin-top:12px"><a href="#" id="toRegister" style="color:#2b7a78;text-decoration:none">Créer un compte</a></p>
    </section>

    <!-- Register Form -->
    <section id="registerForm" class="panel" style="max-width:500px;display:none">
      <h2>Inscription</h2>
      <form id="registerSubmit">
        <label>Pseudo<br><input type="text" id="regPseudo" required></label>
        <label>Email<br><input type="email" id="regEmail" required></label>
        <label>Mot de passe<br><input type="password" id="regPassword" required></label>
        <label>Confirmer mot de passe<br><input type="password" id="regPassword2" required></label>
        
        <h4 style="margin-top:16px;margin-bottom:8px">Mes animaux (max 10)</h4>
        <div id="animalsList" style="max-height:300px;overflow-y:auto"></div>
        <button type="button" id="addAnimalBtn" style="margin-top:8px;padding:6px 10px;background:#e8f1f0;border:1px solid #2b7a78;color:#2b7a78;border-radius:4px;cursor:pointer">+ Ajouter un animal</button>
        
        <button type="submit" style="margin-top:16px;width:100%">Créer le compte</button>
      </form>
      <p style="text-align:center;margin-top:12px"><a href="#" id="toLogin" style="color:#2b7a78;text-decoration:none">Retour à la connexion</a></p>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>